(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3eda78a"],{"0c4e":function(t,e,a){"use strict";var s=a("5075"),n=a.n(s);n.a},5075:function(t,e,a){},ac78:function(t,e,a){"use strict";a.r(e);var s,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mine-box"},[a("Tabs",{attrs:{"active-key":t.firstActiveKey},on:{change:function(e){return t.tabsChange("firstActiveKey",e)}}},[a("Tab-pane",{key:"baseInfo",attrs:{tab:"基本资料"}},[a("section",{staticClass:"content"},[a("ul",{staticClass:"ul"},[a("li",[a("div",{staticClass:"left"},[t._v("用户名：")]),a("div",{staticClass:"right"},[a("Input",{staticStyle:{width:"100%","max-width":"400px"},attrs:{placeholder:"请输入用户名"},model:{value:t.editUser.userName,callback:function(e){t.$set(t.editUser,"userName",e)},expression:"editUser.userName"}})],1)]),a("li",[a("div",{staticClass:"left"},[t._v("手机号：")]),a("div",{staticClass:"right"},[a("Input",{staticStyle:{width:"100%","max-width":"400px"},attrs:{placeholder:"请输入手机号",disabled:""},model:{value:t.editUser.phone,callback:function(e){t.$set(t.editUser,"phone",e)},expression:"editUser.phone"}})],1)]),a("li",[a("div",{staticClass:"left"},[t._v("性别：")]),a("div",{staticClass:"right"},[a("a-radio-group",{attrs:{"button-style":"solid"},model:{value:t.editUser.gender,callback:function(e){t.$set(t.editUser,"gender",e)},expression:"editUser.gender"}},[a("a-radio-button",{attrs:{value:1}},[t._v(" 男 ")]),a("a-radio-button",{attrs:{value:0}},[t._v(" 女 ")])],1)],1)]),a("li",[a("div",{staticClass:"left"}),a("div",{staticClass:"right"},[a("Button",{on:{click:t.saveUserInfo}},[t._v("保存")])],1)])])])]),a("Tab-pane",{key:"revisePwd",attrs:{tab:"修改密码"}},[a("section",{staticClass:"content"},[a("p",{staticStyle:{"box-sizing":"border-box",color:"rgba(0,0,0,.65)","background-color":"#e6f7ff","font-size":"14px","list-style":"none",position:"relative",padding:"8px 15px 8px 8px"}},[t._v("我们将向您的手机 "+t._s(t._f("regPhone")(t.editUser.phone))+" 发送短信验证码。")]),a("ul",{staticClass:"ul",staticStyle:{"margin-top":"12px"}},[a("li",[a("div",{staticClass:"left"},[t._v("图形验证码：")]),a("div",{staticClass:"right"},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入图形验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[a("Icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"safety"},slot:"prefix"})],1),a("img",{staticStyle:{width:"100px",height:"32px",background:"rgb(255, 255, 255)",cursor:"pointer"},attrs:{src:t.captchaUrl,alt:"图形验证码"},on:{click:t.reFreshCaptcha}})],1)]),a("li",[a("div",{staticClass:"left"},[t._v("验证码：")]),a("div",{staticClass:"right"},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入6位数验证码"},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}},[a("Icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1),a("Button",{staticClass:"getCaptcha",attrs:{tabindex:"-1",disabled:t.smsSendBtn},domProps:{textContent:t._s(t.smsSendBtn?t.time+" s":"获取验证码")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}}})],1)]),a("li",[a("div",{staticClass:"left"},[t._v("新密码：")]),a("div",{staticClass:"right"},[a("Input",{staticStyle:{width:"100%","max-width":"400px"},attrs:{type:"password",placeholder:"请输入新密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),a("li",[a("div",{staticClass:"left"}),a("div",{staticClass:"right"},[a("Button",{on:{click:t.revisePwd}},[t._v("修改")])],1)])])])]),a("Tab-pane",{key:"intelligentAgentGuest",attrs:{tab:"拓客平台管理"}},[a("section",{staticClass:"content"},[a("Tabs",{attrs:{type:"card","active-key":t.secondActiveKey},on:{change:function(e){return t.tabsChange("secondActiveKey",e)}}},[a("Tab-pane",{key:"tianya",attrs:{tab:"天涯社区"}},[a("section",{staticClass:"content"},[a("ul",{staticClass:"ul"},[a("li",{staticClass:"row"},[a("div",{staticClass:"left col col-md-3 col-12"},[t._v("天涯ID：")]),a("div",{staticClass:"right col col-md-9 col-12"},[a("Input",{staticStyle:{width:"100%","max-width":"400px"},attrs:{value:t.tyId,placeholder:"请输入天涯cookie",disabled:""}})],1)]),a("li",{staticClass:"row"},[a("div",{staticClass:"left col col-md-3 col-12"},[t._v("自定义cookie：")]),a("div",{staticClass:"right col col-md-9 col-12"},[a("Textarea",{staticStyle:{width:"100%","max-width":"400px"},attrs:{placeholder:"请输入天涯cookie",rows:4},model:{value:t.tyCookie,callback:function(e){t.tyCookie=e},expression:"tyCookie"}})],1)]),a("li",{staticClass:"row"},[a("div",{staticClass:"left col col-md-3 col-12"},[t._v("自定义消息文本：")]),a("div",{staticClass:"right col col-md-9 col-12"},[a("Textarea",{staticStyle:{width:"100%","max-width":"400px"},attrs:{placeholder:"请设置自定义消息文本",rows:4},model:{value:t.tyMsg,callback:function(e){t.tyMsg=e},expression:"tyMsg"}})],1)]),a("li",{staticClass:"row"},[a("div",{staticClass:"left col col-md-3 col-12"}),a("div",{staticClass:"right col col-md-9 col-12"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.saveTyInfo()}}},[t._v("保存")])],1)])])])])],1)],1)])],1)],1)},r=[],i=(a("99af"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("3b18"),a("f64c")),c=(a("96cf"),a("1da1")),o=a("5530"),l=a("ade3"),u=(a("ab9e"),a("2c92")),d=(a("8fb1"),a("0c63")),p=(a("5783"),a("59a5")),h=(a("6ba6"),a("5efb")),f=(a("5704"),a("b558")),v=(a("d13f"),a("ccb9")),b=a("365c"),m=a("5880"),g=a("4534"),y=a("f121"),w=Object(g["m"])(Object(g["k"])()+Date.now()+Object(g["k"])()),x={name:"mine",data:function(){return{errorName:"mine",tyCookie:"",tyMsg:"",firstActiveKey:"baseInfo",secondActiveKey:"tianya",editUser:{userName:"",gender:1,phone:""},smsSendBtn:!1,time:60,password:"",code:"",captcha:"",captchaUrl:"".concat(y["b"],"/verifyCode/").concat(w,"?time=").concat((new Date).getTime())}},components:(s={Tabs:v["a"],TabPane:v["a"].TabPane,Textarea:f["a"].TextArea,Button:h["a"],Input:f["a"]},Object(l["a"])(s,p["a"].Group.name,p["a"].Group),Object(l["a"])(s,p["a"].Button.name,p["a"].Button),Object(l["a"])(s,"Icon",d["a"]),Object(l["a"])(s,"Alert",u["a"]),s),computed:Object(o["a"])({tyId:function(){var t="";return this.tyCookie.split("&").map((function(e){"id"===e.split("=")[0]&&(t=e.split("=")[1])})),t}},Object(m["mapState"])(["userInfo"])),watch:{"$route.query":function(t){this.initActiveKet(t)},userInfo:function(){this.initInfo()}},mounted:function(){this.getReplyTyText(),this.getTyCookie(),this.initActiveKet(this.$route.query),this.initInfo()},methods:{reFreshCaptcha:function(){this.captchaUrl="".concat(y["b"],"/verifyCode/").concat(w,"?time=").concat((new Date).getTime())},saveUserInfo:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.editUser,s=a.userName,n=a.gender,Object(g["a"])(s)){e.next=3;break}return e.abrupt("return",i["a"].warning("用户名格式错误"));case 3:return console.log(s,n),e.next=6,Object(b["X"])({username:s,gender:n});case 6:r=e.sent,0===r.status?(t.$store.dispatch("addUserInfo",{userInfo:r.result}),i["a"].success("修改成功")):i["a"].warning("修改失败");case 8:case"end":return e.stop()}}),e)})))()},revisePwd:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.code){e.next=2;break}return e.abrupt("return",i["a"].warning("请输入图形验证码"));case 2:if(t.captcha){e.next=4;break}return e.abrupt("return",i["a"].warning("请输入短信验证码"));case 4:if(!(t.password.length<6)){e.next=6;break}return e.abrupt("return",i["a"].warning("密码太过简单"));case 6:return console.log(t.captcha,t.password),e.next=9,Object(b["V"])({smsCode:t.captcha,password:t.password});case 9:a=e.sent,0===a.status?(i["a"].success("密码修改成功，请重新登录。"),Object(y["d"])("token"),t.$store.dispatch("addUserInfo",{}),t.$router.push("/login")):i["a"].warning(a.msg||"修改失败");case 11:case"end":return e.stop()}}),e)})))()},getCaptcha:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.code){a.next=3;break}return a.abrupt("return",i["a"].warning("请输入图形验证码"));case 3:return a.next=5,Object(b["S"])({phone:e.editUser.phone,code:e.code,codeKey:w}).catch((function(t){return setTimeout((function(){return i["a"].error({key:"sendCaptcha",content:"验证码发送失败"})}),0)}));case 5:s=a.sent,0===s.status?(setTimeout((function(){return i["a"].success({key:"sendCaptcha",content:"验证码发送成功"})}),0),e.smsSendBtn=!0,n=window.setInterval((function(){e.time--<=0&&(e.time=60,e.smsSendBtn=!1,e.clearInterval(n))}),1e3)):(setTimeout((function(){return i["a"].error({key:"sendCaptcha",content:s.msg})}),0),e.reFreshCaptcha());case 7:case"end":return a.stop()}}),a)})))()},initInfo:function(){var t=this.userInfo;if(t.userId){var e=t.userName,a=void 0===e?"":e,s=t.gender,n=void 0===s?1:s,r=t.phone,i=void 0===r?"":r;this.editUser.userName=a,this.editUser.gender=n,this.editUser.phone=i}},tabsChange:function(t,e){this[t]=e},initActiveKet:function(t){this.firstActiveKey=t.firstActiveKey||"baseInfo",this.secondActiveKey=t.secondActiveKey||"tianya"},saveTyInfo:function(){if(!this.tyCookie)return i["a"].warning("请填写天涯cookie，否则无法正常使用拓客模块");this.addTyCookie(),this.replyTyText()},replyTyText:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["Q"])({text:t.tyMsg});case 2:a=e.sent,0===a.status?i["a"].success({key:"saveTyInfo",content:"保存成功"}):i["a"].warning("自定义消息保存失败");case 4:case"end":return e.stop()}}),e)})))()},getReplyTyText:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["E"])({});case 2:a=e.sent,0===a.status?t.tyMsg=a.result:i["a"].warning("自定义消息获取失败");case 4:case"end":return e.stop()}}),e)})))()},addTyCookie:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["a"])({cookie:t.tyCookie,websiteId:t.tyId});case 2:a=e.sent,0===a.status?i["a"].success({key:"saveTyInfo",content:"保存成功"}):i["a"].warning("cookie保存失败");case 4:case"end":return e.stop()}}),e)})))()},getTyCookie:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["I"])({});case 2:a=e.sent,0===a.status?t.tyCookie=a.result||"":i["a"].warning("cookie获取失败");case 4:case"end":return e.stop()}}),e)})))()}}},C=x,k=(a("0c4e"),a("2877")),I=Object(k["a"])(C,n,r,!1,null,"7a92634c",null);e["default"]=I.exports}}]);